/* استيراد Tailwind CSS الأساسي */
@tailwind base;
@tailwind components;
@tailwind utilities;

/*@import "flowbite/dist/flowbite.css";

/* 2. إعدادات الطبقة الأساسية (Base Layer) */
@layer base {
  body {
    @apply bg-gray-50 text-gray-800 antialiased dark:bg-neutral-900 dark:text-neutral-200;
    font-family: 'Almarai', sans-serif;
    margin: 0;
    padding: 0;
  }

  html {
    /* تم إبقاء هذا معلقاً كما في النسخة المحسنة لتجنب التعارض */
    /* background-color: hsl(var(--background)); */
    /* color: hsl(var(--foreground)); */
  }

  /* تحسين شريط التمرير */
  ::-webkit-scrollbar {
    width: 6px;
  }
  ::-webkit-scrollbar-thumb {
    background-color: #0066CC; /* استخدام لون مباشر لضمان الظهور */
    border-radius: 4px;
  }
}

/* 3. استيراد الخطوط المحلية */
@font-face {
  font-family: 'Almarai';
  font-weight: 300;
  src: url('/fonts/Almarai-Light.ttf') format('truetype');
}
@font-face {
  font-family: 'Almarai';
  font-weight: 400;
  src: url('/fonts/Almarai-Regular.ttf') format('truetype');
}
@font-face {
  font-family: 'Almarai';
  font-weight: 700;
  src: url('/fonts/Almarai-Bold.ttf') format('truetype');
}
@font-face {
  font-family: 'Almarai';
  font-weight: 800;
  src: url('/fonts/Almarai-ExtraBold.ttf') format('truetype');
}
@font-face {
  font-family: 'Outfit';
  font-weight: 400;
  src: url('/fonts/Outfit-Regular.ttf') format('truetype');
}
@font-face {
  font-family: 'Outfit';
  font-weight: 500;
  src: url('/fonts/Outfit-Medium.ttf') format('truetype');
}
@font-face {
  font-family: 'Orlean';
  font-weight: 400;
  src: url('/fonts/Orlean-Regular.otf') format('opentype');
}

/* 4. مكونات مخصصة (Custom Components Layer) */
@layer components {
  .safe-area-padding {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }

  .shadow-subtle {
    box-shadow: 0 8px 24px -6px rgba(30, 64, 175, 0.1);
  }

  .gradient-border {
    background: linear-gradient(white, white),
                linear-gradient(135deg, #2390f1 0%, #1a6dbd 100%);
    background-clip: padding-box, border-box;
    background-origin: padding-box, border-box;
    border: 2px solid transparent;
  }

  /* كلاسات الأزرار والإشعارات التي تستخدم @apply */
  .close-btn {
    @apply absolute top-2 right-2 text-gray-600 text-xl cursor-pointer;
    background: none;
    border: none;
  }
  .toast-button {
    @apply inline-flex items-center px-3 py-1 text-xs text-white rounded transition-all duration-200;
  }
  .close-button {
    @apply p-1 hover:bg-black/5 rounded-full transition-colors duration-200 ml-2;
  }
  .x-icon {
    @apply w-4 h-4 text-current;
  }

  /* تحسينات عامة */
  button:focus, a:focus {
    @apply outline-none ring-2 ring-offset-2 ring-blue-500;
  }
  a[target="_blank"] {
    @apply font-medium underline hover:text-blue-700;
  }
}

/* 5. الأدوات المساعدة والرسوم المتحركة (Utilities and Animations) */
/* (لا تستخدم @apply هنا لتجنب مشاكل الترتيب) */

/* أدوات مساعدة أساسية */
.min-w-6 { min-width: 1.5rem; }
.rtl { direction: rtl; }
.filter-transition { transition: all 0.3s ease; }
.scrollbar-thin { scrollbar-width: thin; }

/* تأثيرات الخلفية */
.bg-noise {
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  opacity: 0.03;
}

/* كلاسات تفعيل الحركات */
.animate-ping-once { animation: ping-once 0.5s ease-out; }
.animate-progress-pulse { animation: progress-pulse 1.5s ease-in-out infinite; }
.animate-pulse-slow { animation: pulse-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
.notification-new-highlight { animation: highlight-notification 2s cubic-bezier(0.4, 0, 0.6, 1) 2; }
.slide-in-right { animation: slide-in-right 0.3s ease-out forwards; }
.slide-out-right { animation: slide-out-right 0.3s ease-in forwards; }
.spin { animation: spin 1s linear infinite; }
.skeleton {
  background: linear-gradient(90deg, rgba(226, 232, 240, 0.6) 25%, rgba(241, 245, 249, 0.6) 37%, rgba(226, 232, 240, 0.6) 63%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}
.list-refresh { animation: list-refresh 0.5s ease-out; }
.notification-pulse-warning { animation: pulse-warning 2s infinite; }
.notification-shake { animation: shake 0.82s cubic-bezier(.36,.07,.19,.97) both; }

/* كلاسات الإشعارات والتأثيرات */
.Toastify__toast { animation: toast-entry 0.3s ease-out; }
.ripple-effect {
  position: absolute;
  border-radius: inherit;
  background-color: rgba(59, 130, 246, 0.3);
  width: 100%;
  height: 100%;
  animation: ripple 0.8s ease-out;
  pointer-events: none;
}
.staggered-list-item {
  opacity: 0;
  transform: translateY(10px);
  animation: fadeInUp 0.5s ease forwards;
}
/* تأخير متدرج للقوائم */
.staggered-list-item:nth-child(1) { animation-delay: 0.05s; }
.staggered-list-item:nth-child(2) { animation-delay: 0.1s; }
.staggered-list-item:nth-child(3) { animation-delay: 0.15s; }
.staggered-list-item:nth-child(4) { animation-delay: 0.2s; }
.staggered-list-item:nth-child(5) { animation-delay: 0.25s; }

.loading-wave > * { animation: wave 1.5s infinite; }
.loading-wave > *:nth-child(2) { animation-delay: 0.2s; }
.loading-wave > *:nth-child(3) { animation-delay: 0.4s; }


/* 6. تعريفات Keyframes */
@keyframes ping-once {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.3); opacity: 0.8; }
  100% { transform: scale(1); opacity: 1; }
}
@keyframes progress-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}
@keyframes pulse-slow {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}
@keyframes highlight-notification {
  0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.5); }
  70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
  100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
}
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); } /* تقليل الحركة لجعلها ألطف */
}
@keyframes progress {
  0% { transform: scaleX(0); }
  100% { transform: scaleX(1); }
}
@keyframes toast-entry {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}
@keyframes slideIn {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}
@keyframes slide-in-right {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
@keyframes slide-out-right {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(100%); opacity: 0; }
}
@keyframes ripple {
  to { transform: scale(4); opacity: 0; }
}
@keyframes spin {
  to { transform: rotate(360deg); }
}
@keyframes shimmer {
  100% { transform: translateX(100%); }
}
@keyframes fadeInUp {
  to { opacity: 1; transform: translateY(0); }
}
@keyframes list-refresh {
  from { opacity: 0.5; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes wave {
  0%, 60%, 100% { transform: initial; }
  30% { transform: translateY(-8px); }
}
@keyframes pulse-warning {
  50% { opacity: 0.5; }
}
@keyframes shake {
  10%, 90% { transform: translate3d(-1px, 0, 0); }
  20%, 80% { transform: translate3d(2px, 0, 0); }
  30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
  40%, 60% { transform: translate3d(4px, 0, 0); }
}

/* 7. استعلامات الوسائط (Media Queries) - توضع في النهاية */
@media (max-width: 640px) {
  .profile-header {
    padding-top: 1.5rem;
    padding-bottom: 2rem;
  }
  .subscription-item {
    flex-direction: column;
    align-items: flex-start;
  }
}
.scrollbar-hide::-webkit-scrollbar {
    display: none;
}

/* لمتصفحات IE, Edge, and Firefox */
.scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
}